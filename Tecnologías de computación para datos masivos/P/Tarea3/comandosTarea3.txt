

PASAR ARCHIVOS A LA MAQUINA Y DAR PERMISOS
--------------------
Ejecutar desde mi pc: 

- scp -i /Users/luisi/Documents/Master-Big-Data/Tecnologías\ de\ computación\ para\ datos\ masivos/P/hadoop.pem -r /Users/luisi/Documents/Master-Big-Data/Tecnologías\ de\ computación\ para\ datos\ masivos/P/Tarea3/01-citingpatents ubuntu@ec2-44-203-234-141.compute-1.amazonaws.com:/tmp

scp -i /Users/luisi/Documents/Master-Big-Data/Tecnologías\ de\ computación\ para\ datos\ masivos/P/hadoop.pem -r /Users/luisi/Documents/Master-Big-Data/Tecnologías\ de\ computación\ para\ datos\ masivos/P/Tarea3/02-citationnumberbypatent_chained ubuntu@ec2-44-203-234-141.compute-1.amazonaws.com:/tmp

scp -i /Users/luisi/Documents/Master-Big-Data/Tecnologías\ de\ computación\ para\ datos\ masivos/P/hadoop.pem -r /Users/luisi/Documents/Master-Big-Data/Tecnologías\ de\ computación\ para\ datos\ masivos/P/Tarea3/03-simplereducesidejoin ubuntu@ec2-44-203-234-141.compute-1.amazonaws.com:/tmp

scp -i /Users/luisi/Documents/Master-Big-Data/Tecnologías\ de\ computación\ para\ datos\ masivos/P/hadoop.pem -r /Users/luisi/Documents/Master-Big-Data/Tecnologías\ de\ computación\ para\ datos\ masivos/P/Tarea3/apat63_99.txt ubuntu@ec2-44-203-234-141.compute-1.amazonaws.com:/tmp

scp -i /Users/luisi/Documents/Master-Big-Data/Tecnologías\ de\ computación\ para\ datos\ masivos/P/hadoop.pem -r /Users/luisi/Documents/Master-Big-Data/Tecnologías\ de\ computación\ para\ datos\ masivos/P/Tarea3/cite75_99.txt ubuntu@ec2-44-203-234-141.compute-1.amazonaws.com:/tmp

scp -i /Users/luisi/Documents/Master-Big-Data/Tecnologías\ de\ computación\ para\ datos\ masivos/P/hadoop.pem -r /Users/luisi/Documents/Master-Big-Data/Tecnologías\ de\ computación\ para\ datos\ masivos/P/Tarea3/country_codes.txt ubuntu@ec2-44-203-234-141.compute-1.amazonaws.com:/tmp


Ejecutar desde la maquina de aws: 

Comprobamos permisos y hacemos administrador a hdadmin: 
- sudo chown -R hdadmin:hadoop /tmp/01-citingpatents
- sudo chown -R hdadmin:hadoop /tmp/02-citationnumberbypatent_chained
- sudo chown -R hdadmin:hadoop /tmp/03-simplereducesidejoin
- sudo chown -R hdadmin:hadoop /tmp/apat63_99.txt
- sudo chown -R hdadmin:hadoop /tmp/cite75_99.txt
- sudo chown -R hdadmin:hadoop /tmp/country_codes.txt

A mi no me hacia falta dar mas permisos pero por si tal:
- sudo chmod -R 755 /tmp/01-citingpatents 
- sudo chmod -R 755 /tmp/02-citationnumberbypatent_chained
- sudo chmod -R 755 /tmp/03-simplereducesidejoin 
- sudo chmod -R 755 /tmp/apat63_99.txt
- sudo chmod -R 755 /tmp/cite75_99.txt
- sudo chmod -R 755 /tmp/country_codes.txt

A partir de aquí todo con hdadmin
Subir ficheros con hdfs:
- hdfs dfs -mkdir patentes
- hdfs dfs -D dfs.block.size=32M -put cite75_99.txt apat63_99.txt patentes (no subir con hdfs el fichero de países !!)


EJERCICIO 1
-------------------------------------------------------------------
En 01-citingpatents:
- mvn package
- yarn jar target/citingpatents-0.0.1-SNAPSHOT.jar patentes/cite75_99.txt salida1 (en 01-)


Recuperar el fichero de salida desde hdfs: 
- hdfs dfs -get salida1




EJERCICIO 2
-------------------------------------------------------------------
mv /tmp/01-citingpatents/target/citingpatents-0.0.1-SNAPSHOT.jar /tmp/02-citationnumberbypatent_chained/src/resources

En 02-citationnumberbypatent_chained:
- mvn package 
- export HADOOP_CLASSPATH="./src/resources/citingpatents-0.0.1-SNAPSHOT.jar"
- yarn jar target/citationnumberbypatent_chained-0.0.1-SNAPSHOT.jar -libjars $HADOOP_CLASSPATH patentes/cite75_99.txt salida2 (para compilar con yarn)
- hdfs dfs -text salida2/part-r-00000 (para ver la salida)




EJERCICIO 3
-------------------------------------------------------------------
- mkdir /tmp/03-simplereducesidejoin/src/resources
- cp /tmp/02-citationnumberbypatent_chained/target/citationnumberbypatent_chained-0.0.1-SNAPSHOT.jar /tmp/03-simplereducesidejoin/src/resources (como hdadmin)

En 03-simplereducesidejoin:
- mvn clean package (limpia el proyecto y compila, por si ya compilaste varias veces)
- export HADOOP_CLASSPATH="./src/resources/citationnumberbypatent_chained-0.0.1-SNAPSHOT.jar"
- yarn jar target/simplereducesidejoin-0.0.1-SNAPSHOT.jar -libjars $HADOOP_CLASSPATH salida2 patentes/apat63_99.txt salida3
(Si dice que salida3 ya existe: hdfs dfs -rm -r salida3)
- ver salida: hdfs dfs -text salida3/part-r-00000







